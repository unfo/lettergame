<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <title>The Letter Game</title>
        <style>
            body { font-family: sans-serif; }
            table, td { border: 1px solid black; padding: 5px;}
            td { height: 64px; width: 64px; text-align: center; text-transform: uppercase; }
        </style>
    </head>
    <body>
        <button id="lol">Letters</button><button id="rotate">rotate</button><span id='currentWord'></span>
        <div id="container"></div>
    </body>
    <script src="nodes-and-paths.js"></script>
    <script>
        var eventTarget = null;
        
        var wording = false;
        var current = [];

        var letters = [
            ['t','i','t','e'],
            ['c','i','n','g'],
            ['k','a','l','o'],
            ['c','u','q','k'],
        ];

        var neighbors = [
            ['E,SE,S', 'W,SW,S,SE,E', 'W,SW,S,SE,E', 'W,SW,S,SE' ]
        ]

        var nodes = makeNodes(letters);
        makeNetwork(nodes);

        function makeNodes(puzzle_4x4) {
            let rows = [];
            puzzle_4x4.forEach((row, nth_row) => {
                let node_row = [];
                row.forEach((letter, nth_letter) => {
                    let node = new Node(letter);
                    node_row.push(node);
                });
                rows.push(node_row);
            });
            return rows;
        }

        function makeNetwork(nodes_4x4) {
            nodes_4x4.forEach((row, nth_row) => {
                row.forEach((node, nth_letter) => {
                    let north = nodes[nth_row - 1];
                    if (north !== undefined) {
                        for (let i = -1; i < 2; i++)
                            if (north[nth_letter + i] != undefined)
                                node.addNeighbor(north[nth_letter + i]);
                    }
                    let south = nodes[nth_row + 1];
                    if (south !== undefined) {
                        for (let i = -1; i < 2; i++)
                            if (south[nth_letter + i] != undefined)
                                node.addNeighbor(south[nth_letter + i]);
                    }

                    if (nodes[nth_row][nth_letter - 1] != undefined)
                                node.addNeighbor(nodes[nth_row][nth_letter - 1]);
                    
                    if (nodes[nth_row][nth_letter + 1] != undefined)
                                node.addNeighbor(nodes[nth_row][nth_letter + 1]);
                });
            });
        };

        

        

        // var container = document.querySelector('#container');
        
        // function drawLetters() {
        //     let table = document.createElement('table');
        //     letters.forEach((letter_row, ri) => {
        //         let row = document.createElement('tr');
        //         letter_row.forEach((letter, li) => {
        //             let cell = document.createElement('td');
        //             cell.innerText = letter;
        //             cell.addEventListener('click', (e) => { toggleWord(ri, li) });
        //             cell.addEventListener('mouseenter', (e) => { moveto(ri, li) });
        //             row.appendChild(cell);
        //         });
        //         table.appendChild(row);
        //     });
        //     container.innerHTML = '';
        //     container.appendChild(table);
        // }

        // function rotateBoard() {
        //     let new_table = [
        //             ['','','','',],
        //             ['','','','',],
        //             ['','','','',],
        //             ['','','','',]
        //         ];
        //     letters.forEach((letter_row, row_index) => {
        //         letter_row.forEach((letter, letter_index) => {
        //             new_table[letter_index][letter_row.length - row_index - 1] = letter;
        //         });
        //     })
        //     letters = new_table;
        //     stopWording();
        //     drawLetters();
        // }

        // function currentToString(separator) {
        //     let word = [];
        //     current.forEach(coords => {
        //         let r = coords[0]; 
        //         let l = coords[1];
        //         word.push(letters[r][l]);
        //     });
        //     return word.join(separator);
        // }

        // function toggleWord(row, letter) {
        //     console.log('toggleWord', wording);
        //     wording = !wording;
        //     if (!wording) {
        //         if (current.length > 2) {
        //             console.log('Got word:', currentToString());
        //         }
        //         current = [];
        //     } else {
        //         current.push([row,letter]);
        //     }
        //     drawCurrent();
        // }

        // var currentWord = document.querySelector('#currentWord');
        // function drawCurrent() {
        //     currentWord.innerText = currentToString(' -> ');
        // }

        // function moveto(row, letter) {
        //     if (wording) {
        //         current.push([row, letter]);
        //         drawCurrent();
        //     }
        // }

        // document.querySelector('#lol').addEventListener('click', function(event) { drawLetters(); });
        // document.querySelector('#rotate').addEventListener('click', (e) => { rotateBoard() });
        
        
    </script>
</html>